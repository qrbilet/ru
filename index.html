</script>
<!DOCTYPE html>
<html lang="ru">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>–£–≤–µ–¥–æ–º–ª–µ–Ω–∏–µ –æ–± –æ–ø–ª–∞—Ç–µ</title>
    <base href=".">
    <link rel="icon" type="image/x-icon" href="./favicon.ico">

    <style>
        html, body {
            min-height: 100%;
            margin: 0;
            box-sizing: border-box;
            background-color: #f5f1e8;
            font-family: 'Circe', sans-serif;
        }

        @font-face {
            font-family: 'Circe';
            src: url(circe-bold-webfont.27529df664ce2f0e.woff2) format("woff2"),
                 url(circe-bold-webfont.a6d441f673662776.woff) format("woff");
            font-weight: 700;
        }

        @font-face {
            font-family: 'Circe';
            src: url(circe-regular-webfont.70e2ea4fb032224b.woff2) format("woff2"),
                 url(circe-regular-webfont.01fbe67cb561e424.woff) format("woff");
            font-weight: 400;
        }

        .logo {
            text-align: center;
            margin: 16px 0;
        }

        .content {
            padding: 0 16px;
        }

        .ticket {
            margin-top: 39px;
        }

        .ticket__qrcode {
            margin: 31px 0;
            text-align: center;
        }

        .ticket__button {
            margin-bottom: 32px;
        }

        .trip-details {
            margin-bottom: 35px;
        }

        .text-block {
            text-align: center;
            margin-bottom: 14px;
        }

        .trip-details p {
            text-align: left;
        }

        /* –°–∫—Ä—ã—Ç–∏–µ input –∏ —Å—Ç–∏–ª–∏–∑–∞—Ü–∏—è */
        .input-hidden {
            opacity: 0;
            position: absolute;
            pointer-events: none;
        }

        /* –°—Ç–∏–ª–∏ –¥–ª—è –æ—Ç–æ–±—Ä–∞–∂–µ–Ω–∏—è —á–∏—Å–ª–∞ –±–µ–∑ —Ä–∞–º–∫–∏ */
        .editable-number {
            display: inline-block;
            border-bottom: 1px dashed transparent;
        }

        .editable-number:hover {
            border-bottom-color: #000;
            cursor: pointer;
        }

        /* –ú–µ–¥–∏–∞-–∑–∞–ø—Ä–æ—Å—ã –¥–ª—è –∞–¥–∞–ø—Ç–∏–≤–Ω–æ—Å—Ç–∏ QR-–∫–æ–¥–∞ */
        @media (max-width: 767px) {
            .ticket__qrcode img,
            .ticket__qrcode canvas {
                height: 350px !important;
                width: 350px !important;
            }
        }

        /* –°—Ç–∏–ª–∏ –¥–ª—è toast-—É–≤–µ–¥–æ–º–ª–µ–Ω–∏—è */
        #toast {
            visibility: hidden;
            min-width: 250px;
            margin-left: -125px;
            background-color: #333;
            color: #fff;
            text-align: center;
            border-radius: 2px;
            padding: 16px;
            position: fixed;
            z-index: 1;
            left: 50%;
            bottom: 30px;
            font-size: 17px;
            transition: opacity 0.5s, bottom 0.5s;
            opacity: 0;
        }

        #toast.show {
            visibility: visible;
            opacity: 1;
            bottom: 50px;
        }

        body {
            position: relative;
        }

        .video-container {
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            z-index: 1000;
            display: none;
            background-color: rgba(0, 0, 0, 0.7);
        }

        .video-container video {
            position: absolute;
            top: 50%;
            left: 50%;
            transform: translate(-50%, -50%);
            max-width: 90%;
            max-height: 90%;
        }
    </style>

    <link rel="stylesheet" href="./style.css" media="all">
</head>
<body>
    <noscript>
        <div><img style="position:absolute; left:-9999px;" alt="" src="./95305900"></div>
    </noscript>
    
    <app-root ng-version="14.3.0">
        <router-outlet></router-outlet>
        <app-wrapper>
            <div class="wrapper">
                <app-header>
                    <header>
                        <h1 onclick="playVideo()">–£–≤–µ–¥–æ–º–ª–µ–Ω–∏–µ –æ–± –æ–ø–ª–∞—Ç–µ</h1>
                    </header>
                </app-header>
                
                <div class="logo">
                    <img src="./logo.svg" alt="–°–∏—Å—Ç–µ–º–∞ –ë—ã—Å—Ç—Ä—ã—Ö –ü–ª–∞—Ç–µ–∂–µ–π">
                </div>
                
                <div class="content">
                    <router-outlet></router-outlet>
                    <app-result>
                        <div class="text-block text-block_text-align_center">
                            <p>–í–∞—à –ø—Ä–æ–µ–∑–¥ —É—Å–ø–µ—à–Ω–æ –æ–ø–ª–∞—á–µ–Ω!<br>–ß—Ç–æ–±—ã —Å–æ—Ö—Ä–∞–Ω–∏—Ç—å —Ä–µ–∫–≤–∏–∑–∏—Ç—ã –±–∏–ª–µ—Ç–∞, –Ω–∞–∂–º–∏—Ç–µ –∫–Ω–æ–ø–∫—É ¬´–°–∫–∞—á–∞—Ç—å –±–∏–ª–µ—Ç¬ª</p>
                        </div>
                        <div class="video-container" id="videoContainer" style="display: none;">
                            <video id="payment-notification-video" controls>
                                <source src="path_to_your_video.mp4" type="video/mp4">
                                –í–∞—à –±—Ä–∞—É–∑–µ—Ä –Ω–µ –ø–æ–¥–¥–µ—Ä–∂–∏–≤–∞–µ—Ç –≤–∏–¥–µ–æ.
                            </video>
                        </div>
                        <app-ticket>
                            <div class="ticket">
                                <app-trip-details>
                                    <div class="trip-details text-block" id="trip-details">
                                        <p>–°–µ—Ä–∏—è –±–∏–ª–µ—Ç–∞: <strong id="ticket-series">QR2001</strong></p>
                                        <p>–ù–æ–º–µ—Ä –±–∏–ª–µ—Ç–∞: <strong id="ticket-number">20240715071131000</strong></p>
                                        <p>–î–∞—Ç–∞/–≤—Ä–µ–º—è –ø–æ–µ–∑–¥–∫–∏: <strong id="ticket-date-time"></strong></p>
                                        <p>
                                            <span id="bus-label" onclick="toggleTransport()">–ê–≤—Ç–æ–±—É—Å:</span>
                                            <strong class="editable-number" id="ticket-bus" onclick="editBus()">0</strong>
                                            <input type="number" id="input-ticket-bus" class="input-hidden" onblur="saveBus()">
                                        </p>
                                        <p>
                                            <span>–¢/–°:</span>
                                            <strong class="editable-number" id="ticket-tc" onclick="editTC()">0</strong>
                                            <input type="number" id="input-ticket-tc" class="input-hidden" onblur="saveTC()">
                                        </p>
                                        <p>
                                            –°—Ç–æ–∏–º–æ—Å—Ç—å:
                                            <strong class="editable-number" id="ticket-price" onclick="editPrice()">40.00 —Ä—É–±.</strong>
                                            <input type="text" id="input-ticket-price" class="input-hidden">
                                        </p>
                                    </div>
                                </app-trip-details>
                                
                                <div class="text-block text-block_text-align_center text-block_margin-bottom_14">
                                    <p onclick="resetTimer()">–° –º–æ–º–µ–Ω—Ç–∞ –æ–ø–ª–∞—Ç—ã –ø—Ä–æ—à–ª–æ:<br><strong id="time-since-payment">00:00:00</strong></p>
                                </div>
                                
                                <div class="text-block text-block_text-align_center">
                                    <p>QR-–∫–æ–¥ –±–∏–ª–µ—Ç–∞ –¥–ª—è –ø—Ä–µ–¥—ä—è–≤–ª–µ–Ω–∏—è –∫–æ–Ω—Ç—Ä–æ–ª–µ—Ä—É</p>
                                </div>
                                
                                <div class="ticket__qrcode">
                                    <img src="./qrcode.png" alt="QR-–∫–æ–¥ –±–∏–ª–µ—Ç–∞" style="height: 2000px; width: 2000px;" aria-label="url" title="–ë–∏–ª–µ—Ç">
                                </div>
                                
                                <div class="ticket__button">
                                    <app-button>
                                        <div class="for-button">
                                            <button class="for-button__button" onclick="showToast('–û—à–∏–±–∫–∞')">–°–∫–∞—á–∞—Ç—å –±–∏–ª–µ—Ç</button>
                                        </div>
                                        <div class="footer-text">v1.2 by doycs</div>
                                    </app-button>
                                </div>
                            </div>
                        </app-ticket>
                    </app-result>
                </div>
            </div>
        </app-wrapper>
    </app-root>

    <div id="toast">–û—à–∏–±–∫–∞</div>

    <script>
        document.addEventListener('DOMContentLoaded', function() {
            // –§—É–Ω–∫—Ü–∏—è –¥–ª—è –æ–±–Ω–æ–≤–ª–µ–Ω–∏—è –≤—Ä–µ–º–µ–Ω–∏ –∫–∞–∂–¥—É—é —Å–µ–∫—É–Ω–¥—É
            function updateTime() {
                var now = new Date();
                var options = {
                    year: 'numeric',
                    month: 'numeric',
                    day: 'numeric',
                    hour: 'numeric',
                    minute: 'numeric',
                    timeZone: 'Europe/Moscow'
                };
                var formattedDate = now.toLocaleDateString('ru-RU', options).replace(',', '');
                document.getElementById('ticket-date-time').textContent = formattedDate;
            }

            // –§—É–Ω–∫—Ü–∏—è –¥–ª—è –≥–µ–Ω–µ—Ä–∞—Ü–∏–∏ —Å–ª—É—á–∞–π–Ω–æ–≥–æ —á–∏—Å–ª–∞ –∑–∞–¥–∞–Ω–Ω–æ–π –¥–ª–∏–Ω—ã
            function generateRandomNumber(min, max) {
                return Math.floor(Math.random() * (max - min + 1)) + min;
            }

            // –§—É–Ω–∫—Ü–∏—è –¥–ª—è –æ–±–Ω–æ–≤–ª–µ–Ω–∏—è —Å–µ—Ä–∏–∏ –±–∏–ª–µ—Ç–∞
            function updateTicketSeries() {
                var randomTwoDigit = generateRandomNumber(1, 79).toString().padStart(2, '0');
                var randomThreeDigit = generateRandomNumber(11, 800).toString().padStart(3, '0');
                var ticketSeries = 'QR2001' + randomTwoDigit + '000' + randomThreeDigit;
                document.getElementById('ticket-series').textContent = ticketSeries;
            }

            // –§—É–Ω–∫—Ü–∏—è –¥–ª—è –æ–±–Ω–æ–≤–ª–µ–Ω–∏—è –Ω–æ–º–µ—Ä–∞ –±–∏–ª–µ—Ç–∞
            function updateTicketNumber() {
                var now = new Date();
                var year = now.getFullYear();
                var month = ('0' + (now.getMonth() + 1)).slice(-2);
                var day = ('0' + now.getDate()).slice(-2);
                var randomDigits = generateRandomNumber(100000, 999999);
                var ticketNumber = year + month + day + randomDigits + '000';
                document.getElementById('ticket-number').textContent = ticketNumber;
            }

            // –ò–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è
            updateTime();
            updateTicketSeries();
            updateTicketNumber();
            setInterval(updateTime, 1000 * 60); // –ö–∞–∂–¥—É—é –º–∏–Ω—É—Ç—É
            setInterval(updateTicketSeries, 24 * 60 * 60 * 1000); // –ö–∞–∂–¥—ã–µ 24 —á–∞—Å–∞
            setInterval(updateTicketNumber, 24 * 60 * 60 * 1000); // –ö–∞–∂–¥—ã–µ 24 —á–∞—Å–∞
        });

        // –§—É–Ω–∫—Ü–∏–∏ –¥–ª—è —Ä–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞–Ω–∏—è —Ç–µ–∫—Å—Ç–æ–≤—ã—Ö –¥–∞–Ω–Ω—ã—Ö
        function editBus() {
            toggleEditVisibility('ticket-bus', 'input-ticket-bus');
        }

        function editTC() {
            toggleEditVisibility('ticket-tc', 'input-ticket-tc');
        }

        function editPrice() {
            toggleEditVisibility('ticket-price', 'input-ticket-price', ' —Ä—É–±.');
        }

        function toggleEditVisibility(textId, inputId, suffix = '') {
            var textElement = document.getElementById(textId);
            var inputElement = document.getElementById(inputId);

            inputElement.value = textElement.textContent.replace(suffix, '');
            textElement.style.display = 'none';
            inputElement.style.display = 'inline-block';
            inputElement.focus();
        }

        // –û–±—Ä–∞–±–æ—Ç—á–∏–∫–∏ –¥–ª—è —Å–æ—Ö—Ä–∞–Ω–µ–Ω–∏—è –∏–∑–º–µ–Ω–µ–Ω–∏–π –ø—Ä–∏ –ø–æ—Ç–µ—Ä–µ —Ñ–æ–∫—É—Å–∞
        document.getElementById('input-ticket-bus').addEventListener('blur', function() {
            saveValue('ticket-bus', 'input-ticket-bus');
        });

        document.getElementById('input-ticket-tc').addEventListener('blur', function() {
            saveValue('ticket-tc', 'input-ticket-tc');
        });

        document.getElementById('input-ticket-price').addEventListener('blur', function() {
            saveValue('ticket-price', 'input-ticket-price', ' —Ä—É–±.');
        });

        function saveValue(textId, inputId, suffix = '') {
            var textElement = document.getElementById(textId);
            var inputElement = document.getElementById(inputId);
            var newValue = inputElement.value.trim();

            if (newValue !== '' && !isNaN(newValue)) {
                textElement.textContent = newValue + suffix;
            }

            inputElement.style.display = 'none';
            textElement.style.display = 'inline-block';
        }

        // –§—É–Ω–∫—Ü–∏—è –¥–ª—è –ø–æ–∫–∞–∑–∞ toast-—É–≤–µ–¥–æ–º–ª–µ–Ω–∏—è
        function showToast(message) {
            var toast = document.getElementById('toast');
            toast.textContent = message;
            toast.classList.add('show');

            setTimeout(function() {
                toast.classList.remove('show');
            }, 3000);
        }

        // –§—É–Ω–∫—Ü–∏—è –¥–ª—è –ø–µ—Ä–µ–∫–ª—é—á–µ–Ω–∏—è —Ç—Ä–∞–Ω—Å–ø–æ—Ä—Ç–∞
        function toggleTransport() {
            const busLabel = document.getElementById("bus-label");
            busLabel.textContent = busLabel.textContent === "–ê–≤—Ç–æ–±—É—Å:" ? "–¢—Ä–æ–ª–ª–µ–π–±—É—Å:" : "–ê–≤—Ç–æ–±—É—Å:";
        }

        // –¢–∞–π–º–µ—Ä
        var seconds = 0; 

        function resetTimer() {
            seconds = 0; 
            updateTimer(); 
        }

        function updateTimer() {
            var hours = Math.floor(seconds / 3600);
            var minutes = Math.floor((seconds % 3600) / 60);
            var remainingSeconds = seconds % 60;

            var timeString = 
                (hours < 10 ? "0" + hours : hours) + ":" +
                (minutes < 10 ? "0" + minutes : minutes) + ":" +
                (remainingSeconds < 10 ? "0" + remainingSeconds : remainingSeconds);

            document.getElementById("time-since-payment").textContent = timeString;
            seconds++;
            setTimeout(updateTimer, 1000); // –ö–∞–∂–¥—É—é —Å–µ–∫—É–Ω–¥—É
        }

        // –§—É–Ω–∫—Ü–∏—è –¥–ª—è –≤–æ—Å–ø—Ä–æ–∏–∑–≤–µ–¥–µ–Ω–∏—è –≤–∏–¥–µ–æ
        function playVideo() {
            const videoContainer = document.getElementById("videoContainer");
            const video = document.getElementById("payment-notification-video");

                // –î–æ–±–∞–≤–ª—è–µ–º –∫–ª–∞—Å—Å –¥–ª—è –ø–æ–ª–Ω–æ—ç–∫—Ä–∞–Ω–Ω–æ–≥–æ —Ä–µ–∂–∏–º–∞
    			videoContainer.classList.add('fullscreen');

            // –ü–æ–∫–∞–∑–∞—Ç—å –≤–∏–¥–µ–æ –∏ –Ω–∞—á–∞—Ç—å –≤–æ—Å–ø—Ä–æ–∏–∑–≤–µ–¥–µ–Ω–∏–µ
            videoContainer.style.display = "block";
            video.play();
        }
    </script>
</body>

<!-- 

–¢–∞–∫, –ï–ë–ê–¢–¨ 
–í–æ-–ø–µ—Ä–≤—ã—Ö, –∑–∞—á–µ–º —Ç—ã —Å—é–¥–∞ –∑–∞—à–µ–ª?
–í–æ-–≤—Ç–æ—Ä—ã—Ö, —Å–∫–∞–∂–∏ —Å–ø–∞—Å–∏–±–æ —Å–æ–∑–¥–∞—Ç–µ–ª—é, —á—Ç–æ —ç–∫–æ–Ω–æ–º–∏—à—å —Å–≤–æ–∏ –∫–æ–ø–µ–π–∫–∏ –µ–±–∞–Ω—ã–µ.
–í-—Ç—Ä–µ—Ç—å–∏—Ö –Ω–µ –ø–∏–∑–¥–∏ —Å–∞–π—Ç –ø–∂–ø–∂–ø–∂.

devblog v1.9 ZOVüá∫üá¶:
	–ø–æ—á–∏—â–µ–Ω –∫–æ–¥ –æ—Ç —Ö—É–π–Ω–∏.
	—Å—Ç–∞—Ä—Ç/–æ–±–Ω—É–ª–µ–Ω–∏–µ —Ç–∞–π–º–µ—Ä–∞ –ø–æ –Ω–∞–∂–∞—Ç–∏—é.
        —É–ª—É—á—à–µ–Ω qr-–∫–æ–¥.

info:
	dev @zxchoxxy
	–ø–æ–¥–ø–∏—Å–∫–∞ –≤ –º–µ—Å—è—Ü 350—Ä—É–±.

-->
